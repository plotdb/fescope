<!DOCTYPE html><html><head></head><body><script>var proxin,ref$;proxin=function(){var e=this;this.hash={};this.proxy=new Proxy(window,{set:function(o,n,r){console.log("proxy.set: ",n);if(!e.hash[n]){e.hash[n]=o[n]}o[n]=r;return true}});return this};proxin.func={};proxin.prototype=(ref$=Object.create(Object.prototype),ref$.enter=function(){return wind},ref$.wrap=function(o){var n,r=this;this.id=Math.random().toString(16).substring(2);o='proxin.func["'+this.id+'"] = pp = function(proxy) {\nconsole.log(1);\n/*\nvar global = proxy; \nvar globalThis = proxy; \nvar self = proxy; \nvar window = proxy; \n*/\nconsole.log(2);\n'+o+"\nconsole.log(3);\n};\npp(document.currentScript.proxy);";n=document.createElement("script");n.proxy=this.proxy;n.onerror=function(){};console.log("a");n.onload=function(){console.log("onload");return proxin.func[r.id](r.proxy)};n.appendChild(document.createTextNode(o));console.log("b");return document.body.appendChild(n)},ref$.restore=function(){var o,n,r,e=[];for(o in n=this.hash){r=n[o];e.push(window[o]=r)}return e},ref$);window.proxin=proxin;</script><script>var p,code;p=new proxin;code='console.log("code executed");\nfunction mycls() {\n  this.name = "mycls";\n  return this;\n}';p.wrap(code);</script></body></html>